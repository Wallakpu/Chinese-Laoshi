<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Profile - Chinese Laoshi</title>
    <link rel="stylesheet" href="../styles/style.css">
    <link rel="stylesheet" href="../styles/navbar.css">
    <link rel="stylesheet" href="../styles/profile.css">
    <link rel="stylesheet" href="../styles/footer.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <style>
        /* Fallback styles if CSS fails to load */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .profile-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <div class="logo-icon">中</div>
                Chinese Laoshi
            </div>
            <div class="hamburger" onclick="toggleMenu()">☰</div>
            <ul class="nav-links" id="navMenu">
                <li><a href="../index.html">Home</a></li>
                <li><a href="./character.html">HSK Characters</a></li>
                <li><a href="./lesson.html">Online Classes</a></li>
                <li><a href="./quiz.html">Level Test</a></li>
                <li><a href="./premium.html">Premium</a></li>
                <li><a href="./books.html">Books</a></li>
                <li><a href="./about.html">About Us</a></li>
                <li id="profileLi">
                    <a href="./profile.html"><i class="fa-solid fa-user"></i> Profile</a>
                </li>
            </ul>  
        </div>
    </header>

    <section class="profile-section">
              <div class="profile-actions">
        </div>
        <div class="profile-container">
            <!-- Profile Header -->
            <div class="profile-header">
                <div class="profile-avatar">
                    <img src="../images/default-avatar.jpg" alt="Profile Picture" id="profilePicture">
                    <button class="edit-avatar-btn" onclick="document.getElementById('avatarUpload').click()">
                        <i class="fas fa-camera"></i>
                    </button>
                    <input type="file" id="avatarUpload" accept="image/*" style="display: none;">
                </div>
                <div class="profile-info">
                    <h1 id="username">Username</h1>
                    <p class="member-since">Member since: <span id="joinDate">January 2025</span></p>
                    <div class="profile-level">
                        <div class="level-progress">
                            <div class="progress-bar" style="width: 65%;"></div>
                        </div>
                        <span>HSK <span id="currentLevel">2</span> - 65%</span>
                    </div>
                </div>
            </div>

            <!-- Profile Navigation -->
            <div class="profile-nav">
                <button class="nav-btn active" data-tab="dashboard">Dashboard</button>
                <button class="nav-btn" data-tab="progress">My Progress</button>
                <button class="nav-btn" data-tab="classes">My Classes</button>
                <button class="nav-btn" data-tab="achievements">Achievements</button>
                <button class="nav-btn" data-tab="settings">Settings</button>
            </div>

            <!-- Profile Content Sections -->
            <div class="profile-content">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Current Streak</h3>
                            <p class="stat-value">7 <span>days</span></p>
                            <p class="stat-description">Keep it up!</p>
                        </div>
                        <div class="stat-card">
                            <h3>Characters Learned</h3>
                            <p class="stat-value">248</p>
                            <p class="stat-description">+12 this week</p>
                        </div>
                        <div class="stat-card">
                            <h3>Classes Taken</h3>
                            <p class="stat-value">18</p>
                            <p class="stat-description">5 this month</p>
                        </div>
                        <div class="stat-card">
                            <h3>Quizzes Completed</h3>
                            <p class="stat-value">32</p>
                            <p class="stat-description">Average score: 85%</p>
                        </div>
                    </div>

                    <div class="recent-activity">
                        <h2>Recent Activity</h2>
                        <ul class="activity-list">
                            <li>
                                <i class="fas fa-book activity-icon"></i>
                                <div class="activity-details">
                                    <p>Completed HSK2 Lesson 5</p>
                                    <small>Today, 10:30 AM</small>
                                </div>
                            </li>
                            <li>
                                <i class="fas fa-trophy activity-icon"></i>
                                <div class="activity-details">
                                    <p>Earned "Character Master" badge</p>
                                    <small>Yesterday, 5:15 PM</small>
                                </div>
                            </li>
                            <li>
                                <i class="fas fa-chalkboard-teacher activity-icon"></i>
                                <div class="activity-details">
                                    <p>Attended class with Teacher Wang</p>
                                    <small>Monday, 2:00 PM</small>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="recommended-lessons">
                        <h2>Recommended For You</h2>
                        <div class="lesson-cards">
                            <div class="lesson-card">
                                <h3>HSK 2 Lesson 6</h3>
                                <p>Food and Dining Vocabulary</p>
                                <button class="start-lesson-btn">Start Lesson</button>
                            </div>
                            <div class="lesson-card">
                                <h3>Grammar Focus</h3>
                                <p>Using 了 (le) correctly</p>
                                <button class="start-lesson-btn">Start Lesson</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Progress Tab -->
                <div class="tab-content" id="progress">
                    <h2>My Learning Progress</h2>
                    <div class="progress-chart">
                        <!-- This would be replaced with a real chart library in implementation -->
                        <div class="chart-placeholder">HSK Level Progress Chart</div>
                    </div>
                    
                    <div class="progress-details">
                        <div class="hsk-level">
                            <h3>HSK 2 Progress</h3>
                            <div class="level-details">
                                <div class="vocab-progress">
                                    <h4>Vocabulary</h4>
                                    <p>150/300 words mastered</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 50%;"></div>
                                    </div>
                                </div>
                                <div class="grammar-progress">
                                    <h4>Grammar</h4>
                                    <p>12/20 points mastered</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 60%;"></div>
                                    </div>
                                </div>
                                <div class="listening-progress">
                                    <h4>Listening</h4>
                                    <p>8/15 exercises completed</p>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 53%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Classes Tab -->
                <div class="tab-content" id="classes">
                    <h2>My Classes</h2>
                    <div class="class-tabs">
                        <button class="class-tab-btn active" data-class-type="upcoming">Upcoming</button>
                        <button class="class-tab-btn" data-class-type="completed">Completed</button>
                        <button class="class-tab-btn" data-class-type="cancelled">Cancelled</button>
                    </div>
                    
                    <div class="class-list">
                        <div class="class-card">
                            <div class="class-info">
                                <h3>HSK 2 - Lesson 7</h3>
                                <p class="class-teacher">With Teacher Zhang</p>
                                <p class="class-time"><i class="far fa-clock"></i> Tomorrow, 3:00 PM - 4:00 PM</p>
                            </div>
                            <div class="class-actions">
                                <button class="join-btn">Join Class</button>
                                <button class="reschedule-btn">Reschedule</button>
                            </div>
                        </div>
                        <div class="class-card">
                            <div class="class-info">
                                <h3>Conversation Practice</h3>
                                <p class="class-teacher">With Teacher Li</p>
                                <p class="class-time"><i class="far fa-clock"></i> Friday, 10:00 AM - 11:00 AM</p>
                            </div>
                            <div class="class-actions">
                                <button class="join-btn">Join Class</button>
                                <button class="reschedule-btn">Reschedule</button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="book-class-btn">Book New Class</button>
                </div>

                <!-- Achievements Tab -->
                <div class="tab-content" id="achievements">
                    <h2>My Achievements</h2>
                    <div class="badges-container">
                        <div class="badge-card earned">
                            <div class="badge-icon"><i class="fas fa-award"></i></div>
                            <h3>7-Day Streak</h3>
                            <p>Logged in for 7 consecutive days</p>
                        </div>
                        <div class="badge-card earned">
                            <div class="badge-icon"><i class="fas fa-book"></i></div>
                            <h3>Bookworm</h3>
                            <p>Completed 10 reading exercises</p>
                        </div>
                        <div class="badge-card">
                            <div class="badge-icon"><i class="fas fa-chart-line"></i></div>
                            <h3>Quick Learner</h3>
                            <p>Complete 5 lessons in one week</p>
                        </div>
                        <div class="badge-card">
                            <div class="badge-icon"><i class="fas fa-microphone"></i></div>
                            <h3>Conversationalist</h3>
                            <p>Attend 5 speaking classes</p>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-content" id="settings">
                    <h2>Account Settings</h2>
                    <form class="settings-form">
                        <div class="form-group">
                            <label for="displayName">Display Name</label>
                            <input type="text" id="displayName" value="CurrentUsername">
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" value="user@example.com">
                        </div>
                        <div class="form-group">
                            <label for="password">Change Password</label>
                            <input type="password" id="password" placeholder="Enter new password">
                        </div>
                        <div class="form-group">
                            <label for="notifications">Notification Preferences</label>
                            <div class="checkbox-group">
                                <label>
                                    <input type="checkbox" checked> Email notifications
                                </label>
                                <label>
                                    <input type="checkbox" checked> Class reminders
                                </label>
                                <label>
                                    <input type="checkbox"> Promotional offers
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Learning Goals</label>
                            <select class="goals-select">
                                <option>Casual Learning</option>
                                <option selected>HSK Preparation</option>
                                <option>Business Chinese</option>
                                <option>Travel Chinese</option>
                            </select>
                        </div>
                        <button type="submit" class="save-settings-btn">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
        <button id="logoutBtn" class="logout-btn" style="position: absolute; bottom: 20px; right: 20px;">
            <i class="fas fa-sign-out-alt"></i> Log Out
        </button>  

                <script>
                   document.getElementById('logoutBtn').addEventListener('click', function() {
                  localStorage.removeItem('isLoggedIn');
                  localStorage.removeItem('username');
                  updateAuthButton();
                    window.location.href = '../index.html';
    });
</script>
               </button>
            </div>
    </section>

    <footer>
       <div class="footer-container">
            <div class="footer-brand">
                <a href="#" class="footer-logo">
                    <div class="footer-logo-icon">中</div>
                    Chinese Laoshi
                </a>
                <p class="footer-description">
                    Your trusted partner in learning Chinese. From HSK preparation to fluent conversation, we're here to guide your journey to mastering Mandarin.
                </p>
                <div class="social-media">
                    <a href="#" class="social-link"><i class="fa-brands fa-facebook"></i></a>
                    <a href="#" class="social-link"><i class="fa-brands fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fa-brands fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fa-brands fa-linkedin"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Learning</h3>
                <ul class="footer-links">
                    <li><a href="./pages/character.html">HSK Vocabulary</a></li>
                    <li><a href="./pages/lesson.html">Online Classes</a></li>
                    <li><a href="./pages/quiz.html">Level Test</a></li>
                    <li><a href="books.html">Study Materials</a></li>
                 </ul>
            </div>

            <div class="footer-section">
                <h3>Support</h3>
                <ul class="footer-links">
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Community</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Company</h3>
                <ul class="footer-links">
                    <li><a href="/pages/about.html">About Us</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms of Service</a></li>
                </ul>
            </div>
            </div>
            <p class="footer-ending">
                &copy; 2025 Chinese Laoshi. All rights reserved.
                Made with love for Chinese learners worldwide.
            </p>
    </footer>

    <script src="../script/profile.js"></script>
<script>
        // Check if user is logged in
        if (!localStorage.getItem('isLoggedIn')) {
            alert('Please login first!');
            window.location.href = './login.html';
        }

        // Load user data
        document.getElementById('username').textContent = 
            localStorage.getItem('username') || 'User';
            
        // Handle logout
        document.getElementById('logoutBtn').addEventListener('click', function() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('username');
            window.location.href = './login.html';
        });
        
        // Avatar upload functionality
        document.getElementById('avatarUpload').addEventListener('change', function(e) {
            if (e.target.files.length > 0) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    document.getElementById('profilePicture').src = event.target.result;
                };
                reader.readAsDataURL(e.target.files[0]);
            }
        });
    </script>
    <script src="./scripts/auth.js"></script>
</body>
</html>